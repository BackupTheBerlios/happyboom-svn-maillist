<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Happyboom-svn] r133 - poilu/trunk
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/happyboom-svn/2005-September/index.html" >
   <LINK REL="made" HREF="mailto:happyboom-svn%40lists.berlios.de?Subject=Re%3A%20%5BHappyboom-svn%5D%20r133%20-%20poilu/trunk&In-Reply-To=%3C200509090241.j892f0ch003683%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000038.html">
   <LINK REL="Next"  HREF="000041.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Happyboom-svn] r133 - poilu/trunk</H1>
    <B>Victor STINNER at BerliOS</B> 
    <A HREF="mailto:happyboom-svn%40lists.berlios.de?Subject=Re%3A%20%5BHappyboom-svn%5D%20r133%20-%20poilu/trunk&In-Reply-To=%3C200509090241.j892f0ch003683%40sheep.berlios.de%3E"
       TITLE="[Happyboom-svn] r133 - poilu/trunk">haypo at berlios.de
       </A><BR>
    <I>Fri Sep  9 04:41:00 CEST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="000038.html">[Happyboom-svn] r132 - poilu/trunk
</A></li>
        <LI>Next message: <A HREF="000041.html">[Happyboom-svn] r134 - poilu/trunk
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39">[ date ]</a>
              <a href="thread.html#39">[ thread ]</a>
              <a href="subject.html#39">[ subject ]</a>
              <a href="author.html#39">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: haypo
Date: 2005-09-09 04:40:58 +0200 (Fri, 09 Sep 2005)
New Revision: 133

Modified:
   poilu/trunk/dico.txt
   poilu/trunk/dico_poilu.py
   poilu/trunk/pypoil.py
   poilu/trunk/terminaison.txt
Log:
Tri alphab?\195?\169tique du dico ?\195?\160 la sauvegarde.


Modified: poilu/trunk/dico.txt
===================================================================
--- poilu/trunk/dico.txt	2005-09-09 02:02:16 UTC (rev 132)
+++ poilu/trunk/dico.txt	2005-09-09 02:40:58 UTC (rev 133)
@@ -1,80 +1,83 @@
+abdominaux
 aisselles
-poules
+avant-bras
+babouin
+blaireaux
+bordelais
+bras
+cakos
+cale&#195;&#167;on
+camembert
+chalumeau
+chapeau
+chaussettes
+chien
+citron
+coin
+comique
+cou
+croutes
+cr&#195;&#169;pu
+cul
+c&#195;&#180;lon
+dahu
+dents
+dessous de bras
+dinosaures
+divan
+docteur
 doigt
+fion
 foie
-noix
-petits pois
-dents
-sang
+front
+genou
 gland
-divan
-p&#195;&#169;dants
-rapes
+gosier
+gros zizi
+jambon
+kiki
+loup
+lutins
 mains
-vagin
-seins
-lutins
-teigneux
-thorax
+marsouin
+menton
+meules
+minou
+mollet
+mouettes
 moustiques
-comique
-loup
 nez
+noix
 n&#195;&#169;n&#195;&#169;
-meules
+oreilles
+orteils
+pectoraux
+petits pois
+pieds
+pierres
+poignet
+poilu
 poing
-coin
-babouin
-marsouin
-pierre
-chien
-croutes
-pieds
-gosier
-docteur
+poireau
+porcelais
+poules
+poumon
 pubis
-poignet
-mollet
+p&#195;&#169;dants
+rapes
+roudoudou
+sang
+seins
+sexe
 superettes
-baskets
-chaussettes
-bras
 tas de gras
+teigneux
+thorax
 tibia
-dessous de bras
-avant-bras
-citron
-fion
+touffes
+tout nu
+toutou
+trilili
 t&#195;&#169;ton
-menton
-c&#195;&#180;lon
-poumon
-front
-cale&#195;&#167;on
-sexe
-kiki
+vagin
 zizi
-trilili
-gros zizi
-bordelais
-porcelais
-chapeau
-poireau
-pectoraux
-abdominaux
-cakos
-blaireaux
-chalumeau
-orteils
-oreilles
-cul
-dahu
-poilu
-tout nu
-cr&#195;&#169;pu
-cou
-genou
-toutou
-minou
-roudoudou
-dinosaures

Modified: poilu/trunk/dico_poilu.py
===================================================================
--- poilu/trunk/dico_poilu.py	2005-09-09 02:02:16 UTC (rev 132)
+++ poilu/trunk/dico_poilu.py	2005-09-09 02:40:58 UTC (rev 133)
@@ -19,8 +19,7 @@
         self.charge_dico()
 
     def echo(self, message):
-        print message
-#        self.bot.echo(message)
+        self.bot.echo(message)
         
     def ajoute_terme(self, terme):
         cle = self.terminaison(terme)
@@ -37,7 +36,7 @@
         if fin==None: return None
         if not self.dico.has_key(fin): return None
         if not terme in self.dico[fin]: return None
-        self.echo (&quot;Supprime le mot %s&quot; %(terme))
+        self.echo(&quot;Supprime le mot %s&quot; %(terme))
         self.dico[fin].remove(terme)
         return True
 
@@ -50,9 +49,13 @@
     def sauve(self):
         self.echo (&quot;Sauve le dico.&quot;)
         f = file(&quot;dico.txt&quot;, &quot;w&quot;)
+        dico = []
         for key in self.dico:
             for terme in self.dico[key]: 
-                f.write (&quot;%s\n&quot; %(terme.encode(&quot;utf-8&quot;)))
+                dico.append(terme)
+        dico.sort()
+        for item in dico:
+            f.write (&quot;%s\n&quot; %(item.encode(&quot;utf-8&quot;)))
         f.close()
 
     def charge_dico(self):

Modified: poilu/trunk/pypoil.py
===================================================================
--- poilu/trunk/pypoil.py	2005-09-09 02:02:16 UTC (rev 132)
+++ poilu/trunk/pypoil.py	2005-09-09 02:40:58 UTC (rev 133)
@@ -55,20 +55,21 @@
 
     def aide(self):
         self.echou(u&quot;Commandes :&quot;)
-        self.echou(u&quot;- liste rimes &lt;mot&gt;    : liste des rimes pour la terminaison du mot sp&#233;cifi&#233;&quot;)
-        self.echou(u&quot;- rime mot / derime mot : ajoute/supprime un mot du dictinnaire&quot;)
-        self.echou(u&quot;- dit #chan (...)      : fait parler le bot&quot;)
-        self.echou(u&quot;- recharge_muet        : recharge muet.txt&quot;)
-        self.echou(u&quot;- recharge_terminaison : recharge terminaison.txt&quot;)
-        self.echou(u&quot;- recharge_dico        : recharge dico.txt&quot;)
-        self.echou(u&quot;- recharge_insult      : recharge insulte.txt&quot;)
-        self.echou(u&quot;- recharge_motcle      : recharge motcle_regex.txt&quot;)
+        self.echou(u&quot;- liste rimes &lt;mot&gt;        : liste des rimes pour la terminaison du mot sp&#233;cifi&#233;&quot;)
+        self.echou(u&quot;- rime mot / derime mot    : ajoute/supprime un mot du dictinnaire&quot;)
+        self.echou(u&quot;- terminaison mot          : affiche la terminaison du mot&quot;)
+        self.echou(u&quot;- dit #chan ... / dit nick ... : fait parler le bot&quot;)
+        self.echou(u&quot;- recharge_muet            : recharge muet.txt&quot;)
+        self.echou(u&quot;- recharge_terminaison     : recharge terminaison.txt&quot;)
+        self.echou(u&quot;- recharge_dico            : recharge dico.txt&quot;)
+        self.echou(u&quot;- recharge_insult          : recharge insulte.txt&quot;)
+        self.echou(u&quot;- recharge_motcle          : recharge motcle_regex.txt&quot;)
         self.echou(u&quot;- join #chan / leave #chan : joint/quitte le canal #&lt;chan&gt;&quot;)
-        self.echou(u&quot;- nick xxx : change de surnom&quot;)
-        self.echou(u&quot;- backup               : sauve toutes les donn&#233;es sur le disque dur&quot;)
-        self.echou(u&quot;- utf-8 / iso          : passe en UTF-8 / iso-8859-1&quot;)
-        self.echou(u&quot;- muet                 : liste des caract&#232;res muets&quot;)
-        self.echou(u&quot;- taux_reponse xxx     : fixe le taux de r&#233;ponse (en pourcent)&quot;)
+        self.echou(u&quot;- nick xxx                 : change de surnom&quot;)
+        self.echou(u&quot;- backup                   : sauve toutes les donn&#233;es sur le disque dur&quot;)
+        self.echou(u&quot;- utf-8 / iso              : passe en UTF-8 / iso-8859-1&quot;)
+        self.echou(u&quot;- muet                     : liste des caract&#232;res muets&quot;)
+        self.echou(u&quot;- taux_reponse xxx         : fixe le taux de r&#233;ponse (en pourcent)&quot;)
 
 
     def on_privmsg(self, c, e):
@@ -257,6 +258,16 @@
             self.connection.nick(regs.group(1))
             return True
             
+        regs = re.compile(&quot;^terminaison (.*)$&quot;, re.IGNORECASE).search(cmd)
+        if regs != None:
+            mot = regs.group(1) 
+            term = self.dico.terminaison(mot)
+            if term != None:
+                self.echou(u&quot;Terminaison de %s : %s&quot; % (mot, term))
+            else:
+                self.echou(u&quot;Terminaison de %s : (aucune)&quot; % mot)
+            return True
+            
         regs = re.compile(&quot;^join (#.*)$&quot;, re.IGNORECASE).search(cmd)
         if regs != None:
             self.channel = regs.group(1) 

Modified: poilu/trunk/terminaison.txt
===================================================================
--- poilu/trunk/terminaison.txt	2005-09-09 02:02:16 UTC (rev 132)
+++ poilu/trunk/terminaison.txt	2005-09-09 02:40:58 UTC (rev 133)
@@ -1,14 +1,14 @@
-ied:(ied[s]?|sier)$
-ier:ier(re)?s?$
-r:(er(re)?|&#195;&#168;re)$
+ied:(ied[s]?|[ps]ier)$
+air:(ier(re)?s?|erre|&#195;&#168;re|aire|ert)$
 or:(aur(es?)?|or[tes]?)$
-aite:(aite?|et(te)?s?|&#195;&#168;tes?)$
+ai:(et|&#195;&#168;)$
+aite:(aite?|ettes?|&#195;&#168;tes?)$
 ouin:(oin[g]?|ouin)$
 oua:oi([exst]|gts?|ent)?$
 ien:ien[ts]?$
 a:(a[st]?|&#195;&#160;)$
 &#195;&#168;:(&#195;&#168;[ts]?|ai([ets]|ent)?|a&#195;&#175;)$
-er:(&#195;&#169;e?s?|ez|cd)$
+er:(&#195;&#169;e?s?|ez|cd|er)$
 an:(en(s|ts?)?|an([dg]|ts?)?)$
 is:is$
 ou:(oo|ou[setx]?)$
@@ -32,3 +32,4 @@
 op:opp?(es?)?$
 ap:ap[p]?(es?)?$
 te:tes?$
+ouf:ouf(fe)?s?$


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000038.html">[Happyboom-svn] r132 - poilu/trunk
</A></li>
	<LI>Next message: <A HREF="000041.html">[Happyboom-svn] r134 - poilu/trunk
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#39">[ date ]</a>
              <a href="thread.html#39">[ thread ]</a>
              <a href="subject.html#39">[ subject ]</a>
              <a href="author.html#39">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/happyboom-svn">More information about the Happyboom-svn
mailing list</a><br>
</body></html>
